apply plugin: 'org.jetbrains.kotlin.jvm'
apply plugin: 'dev.zacsweers.redacted.redacted-gradle-plugin'

compileKotlin {
  kotlinOptions {
    useIR = hasProperty("useIR") && Boolean.parseBoolean(property("useIR"))
    if (JavaVersion.current().java9Compatible) {
      println "Enabling string-concat"
      freeCompilerArgs += "-Xstring-concat=indy-with-constants"
      jvmTarget = JavaVersion.current().toString()
    }
  }
}

dependencies {
  implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
  
  testImplementation "junit:junit:4.13.1"
  testImplementation "com.google.truth:truth:1.1"
}
